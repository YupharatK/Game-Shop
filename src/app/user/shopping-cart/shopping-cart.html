<div class="cart-page-container">
  <h1>Shopping Cart</h1>
  <div class="cart-layout">
    <div class="cart-items-list">
      <div class="cart-header">
        <div class="header-product">PRODUCT</div>
        <div class="header-quantity">QUANTITY</div>
        <div class="header-price">PRICE</div>
        <div class="header-total">TOTAL</div>
      </div>

      <div class="cart-item" *ngFor="let item of (items$ | async)">
        <div class="item-product">
          <img [src]="item.imageUrl" [alt]="item.title">
          <div class="product-info">
            <p class="title">{{ item.title }}</p>
            <p class="genre">{{ item.genre }}</p>
          </div>
        </div>
        <div class="item-quantity">1</div>
        <div class="item-price">{{ item.price }} ‡∏ø</div>
        <div class="item-total">{{ item.price }} ‡∏ø</div>
        <div class="item-remove">
          <button (click)="removeItem(item)">üóëÔ∏è</button>
        </div>
      </div>
    </div>

    <div class="cart-summary">
      <div class="discount-section">
        <label for="discount-code">Discount Code</label>
        <div class="discount-input-group">
          <!-- ‡∏ú‡∏π‡∏Å ngModel ‡πÅ‡∏•‡∏∞ Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Apply -->
          <input
            type="text"
            id="discount-code"
            placeholder="Enter code"
            [(ngModel)]="discountCode"
            (keyup.enter)="applyDiscount()"
          >
          <button type="button" (click)="applyDiscount()" [disabled]="loadingDiscount">Apply</button>
        </div>

        <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡πÇ‡∏Ñ‡πâ‡∏î -->
        <div class="discount-status" *ngIf="discountMessage">
          {{ discountMessage }}
        </div>
        <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß -->
        <div class="discount-active" *ngIf="appliedCode">
          Applied: <strong>{{ appliedCode }}</strong> ({{ appliedPercent }}%)
          <button type="button" (click)="clearDiscount()" class="link-btn">Remove</button>
        </div>
      </div>

      <div class="price-summary">
        <div class="summary-row">
          <span>Subtotal</span>
          <span>{{ subtotal | number:'1.2-2' }} ‡∏ø</span>
        </div>
        <div class="summary-row" *ngIf="discountAmount > 0">
          <span>Discount</span>
          <span>-{{ discountAmount | number:'1.2-2' }} ‡∏ø</span>
        </div>
        <div class="summary-row total">
          <span>Total</span>
          <span>{{ total | number:'1.2-2' }} ‡∏ø</span>
        </div>
        <button class="checkout-btn" (click)="proceedToCheckout()">Proceed to Checkout</button>
      </div>
    </div>
  </div>
</div>
